[% extends "pages/page.html" %]

[% block scripts %]
<script type="module" src="https://cdn.jsdelivr.net/npm/@teipublisher/pb-components@2.19.0/dist/pb-components-bundle.js"></script>
<script src="[[$context?path]]/pages/templating.js"></script>
[% endblock %]

<pb-page class="container" endpoint="[[$context?path]]" api-version="1.0">
    <main class="grid templating">
        <div>
            <h1>Template</h1>
            <jinn-codemirror id="template" mode="html" theme="material-dark">
                <fieldset slot="toolbar" class="grid">
                    <select id="examples">
                        <option value="">[Select an example]</option>
                    </select>
                    <select name="modes">
                        <option value="xquery">XQuery</option>
                        <option value="css">CSS</option>
                        <option value="html" selected="">HTML</option>
                        <option value="xml">XML</option>
                        <option value="markdown">Markdown</option>
                        <option value="default">Plain text</option>
                    </select>
                    <button id="eval">Eval</button>
                </fieldset>
            </jinn-codemirror>
            <details>
                <summary>Syntax Cheatsheet</summary>
                <pb-markdown url="[[$context?path]]/pages/demo/cheatsheet.md"></pb-markdown>
            </details>
        </div>
        <div>
            <h1>Parameters (JSON)</h1>
            <jinn-codemirror id="parameters" mode="json" theme="material-dark" code="{}">
                <div slot="toolbar">
                    <div>Each top-level key becomes a parameter</div>
                </div>
            </jinn-codemirror>
        </div>
    </main>
    <div id="errorMsg" class="output hidden"></div>
    <div class="output hidden">
        <label>HTML Output</label>
        <div id="html"></div>
    </div>
    <div class="output hidden">
        <label>Raw Output</label>
        <pb-code-highlight id="output" language="html" theme="tomorrow" line-numbers=""></pb-code-highlight>
    </div>
    <div class="output hidden">
        <label>Generated XQuery</label>
        <pb-code-highlight id="xquery" language="xquery" theme="tomorrow" line-numbers=""></pb-code-highlight>
    </div>
</pb-page>